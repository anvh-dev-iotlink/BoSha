import * as React from 'react';
import { useNavigate, useSearchParams } from 'react-router-dom';
import { useEffect } from 'react';
import Alert from '@mui/material/Alert';
import AlertTitle from '@mui/material/AlertTitle';
import { buyBookService } from '../../services/buybook.services';
import { Typography } from '@mui/material';

const VnPayStatus = () => {
    const [searchParams] = useSearchParams();
    const [isLoading, setIsLoading] = React.useState(true)
    let navigate = useNavigate()
    useEffect(() => {
        const buyId = searchParams.get('vnp_TxnRef')
        console.log("BuyId", buyId)
        // buyBookService.notifySuccess(orderId2).then((rs) => {
        //     navigate("/book/" + rs.data)
        // }).catch((e) => { navigate("/") })
    }, []);
    return (
        <>
            {isLoading === false ?
                <Alert severity="success">
                    <AlertTitle><strong>Thanh toán thành công</strong></AlertTitle>
                    Hãy quay lại ứng dụng!
                </Alert>
                : <div>
                    <CircularProgress/>
                    <Typography variant='h3'>Đang kiểm tra tình trạng thanh toán, hãy chờ trong giây lát!</Typography>
                </div> }
        </>
    )
}

export default VnPayStatus